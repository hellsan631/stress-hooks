{"version":3,"sources":["components/Benchmark.jsx","utils/nthFib.js","components/FibClass.jsx","components/FibFunctional.jsx","components/FibHooks.jsx","App.js","utils/sourceCode.js","index.js"],"names":["Benchmark","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","renderNumber","increaseRenderNumber","bind","assertThisInitialized","_this2","totalRenders","setState","setTimeout","stopBenchmark","_this$props","Component","component","n","withMemo","react_default","a","createElement","React","nthFib","FibClass","result","Fragment","FibFunctional","FibHooks","calculatedResult","useMemo","_useState","useState","slicedToArray","componentMap","class","functional","hooks","componentDescriptionMap","componentCodeMap","clearedTimes","startTime","endTime","App","handleChangeN","e","objectSpread","currentTarget","value","handleChangeTotalRenders","handleChangeComponent","handleChangeWithMemo","handleClickRunBenchmark","preventDefault","runBenchmark","Date","stopTime","isComponent","isClassComponent","isFunctionalComponent","isHooksComponent","_this$state","componentDescription","concat","propsString","name","type","onChange","className","checked","disabled","onClick","components_Benchmark","Boolean","getTime","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.d70b7e10.chunk.js","sourcesContent":["import React from 'react';\n\nclass Benchmark extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { renderNumber: 1 };\n    this.increaseRenderNumber = this.increaseRenderNumber.bind(this);\n  }\n\n  componentDidMount() {\n    this.increaseRenderNumber();\n  }\n\n  increaseRenderNumber() {\n    if (this.state.renderNumber <= this.props.totalRenders) {\n      this.setState(\n        state => ({ renderNumber: state.renderNumber + 1 }),\n        () => {\n          setTimeout(this.increaseRenderNumber, 0);\n        }\n      );\n    } else {\n      this.props.stopBenchmark();\n    }\n  }\n\n  render() {\n    const { component: Component, n, withMemo } = this.props;\n    return (\n      <Component\n        n={n}\n        renderNumber={this.state.renderNumber}\n        withMemo={withMemo}\n      />\n    );\n  }\n}\n\nexport default Benchmark;\n","function nthFib(n) {\n  if (n <= 0) return 0;\n  if (n === 1) return 1;\n\n  return nthFib(n - 1) + nthFib(n - 2);\n}\n\nexport default nthFib;\n","import React from 'react';\nimport nthFib from '../utils/nthFib';\n\nclass FibClass extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { result: nthFib(props.n) };\n  }\n\n  render() {\n    return (\n      <>\n        <h2>Class Component</h2>\n        <table>\n          <tbody>\n            <tr>\n              <td>Result</td>\n              <td>{this.state.result}</td>\n            </tr>\n            <tr>\n              <td>Render #</td>\n              <td>{this.props.renderNumber}</td>\n            </tr>\n          </tbody>\n        </table>\n      </>\n    );\n  }\n}\n\nexport default FibClass;\n","import React from 'react';\nimport nthFib from '../utils/nthFib';\n\nfunction FibFunctional(props) {\n  const result = nthFib(props.n);\n\n  return (\n    <>\n      <h2>Functional component without Hooks</h2>\n      <table>\n        <tbody>\n          <tr>\n            <td>Result</td>\n            <td>{result}</td>\n          </tr>\n          <tr>\n            <td>Render #</td>\n            <td>{props.renderNumber}</td>\n          </tr>\n        </tbody>\n      </table>\n    </>\n  );\n}\n\nexport default FibFunctional;\n","import React, { useState, useMemo } from 'react';\nimport nthFib from '../utils/nthFib';\n\nfunction FibHooks(props) {\n  const calculatedResult = props.withMemo\n    ? useMemo(() => nthFib(props.n), props.n)\n    : nthFib(props.n);\n  const [result] = useState(calculatedResult);\n\n  return (\n    <>\n      <h2>Functional component with Hooks</h2>\n      <table>\n        <tbody>\n          <tr>\n            <td>Result</td>\n            <td>{result}</td>\n          </tr>\n          <tr>\n            <td>Render #</td>\n            <td>{props.renderNumber}</td>\n          </tr>\n        </tbody>\n      </table>\n    </>\n  );\n}\n\nexport default FibHooks;\n","import React from 'react';\nimport Benchmark from './components/Benchmark';\nimport FibClass from './components/FibClass';\nimport FibFunctional from './components/FibFunctional';\nimport FibHooks from './components/FibHooks';\nimport {\n  fibClassCode,\n  fibFunctionalCode,\n  fibHooksCode,\n} from './utils/sourceCode';\nimport './App.css';\n\nconst componentMap = {\n  class: FibClass,\n  functional: FibFunctional,\n  hooks: FibHooks,\n};\n\nconst componentDescriptionMap = {\n  class: 'class component',\n  functional: 'functional component without hooks',\n  hooks: 'functional component with hooks',\n};\n\nconst componentCodeMap = {\n  class: fibClassCode,\n  functional: fibFunctionalCode,\n  hooks: fibHooksCode,\n};\n\nconst clearedTimes = { startTime: null, endTime: null };\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      component: null,\n      runBenchmark: false,\n      withMemo: false,\n      n: 35,\n      startTime: null,\n      stopTime: null,\n      totalRenders: 10,\n    };\n  }\n\n  handleChangeN = e => {\n    this.setState({ n: e.currentTarget.value, ...clearedTimes });\n  };\n\n  handleChangeTotalRenders = e => {\n    this.setState({ totalRenders: e.currentTarget.value, ...clearedTimes });\n  };\n\n  handleChangeComponent = component => {\n    return () => {\n      this.setState({ component, ...clearedTimes });\n    };\n  };\n\n  handleChangeWithMemo = () => {\n    this.setState(state => ({ withMemo: !state.withMemo, ...clearedTimes }));\n  };\n\n  handleClickRunBenchmark = e => {\n    e.preventDefault();\n    this.setState({ runBenchmark: true, startTime: new Date() });\n  };\n\n  stopBenchmark = () => {\n    this.setState({ runBenchmark: false, stopTime: new Date() });\n  };\n\n  isComponent = component => {\n    return this.state.component === component;\n  };\n\n  isClassComponent = () => {\n    return this.isComponent('class');\n  };\n\n  isFunctionalComponent = () => {\n    return this.isComponent('functional');\n  };\n\n  isHooksComponent = () => {\n    return this.isComponent('hooks');\n  };\n\n  render() {\n    const {\n      component,\n      runBenchmark,\n      withMemo,\n      n,\n      startTime,\n      stopTime,\n      totalRenders,\n    } = this.state;\n\n    const componentDescription = this.isHooksComponent()\n      ? `${componentDescriptionMap[component]} ${\n          withMemo ? '' : 'without '\n        }using useMemo`\n      : componentDescriptionMap[component];\n\n    const propsString = `\nprops: {\nn: ${n || 'undefined'},\nwithMemo: ${withMemo},\n}\n`;\n\n    return (\n      <>\n        <h1>Stress Testing React Hooks</h1>\n        <form>\n          <label>\n            n:\n            <input\n              name=\"n\"\n              type=\"number\"\n              value={n}\n              onChange={this.handleChangeN}\n            />\n          </label>\n          <label>\n            Total number of renders:\n            <input\n              name=\"total number of renders\"\n              type=\"number\"\n              value={totalRenders}\n              onChange={this.handleChangeTotalRenders}\n            />\n          </label>\n          <div className=\"radio\">\n            <label>\n              <input\n                type=\"radio\"\n                value=\"class\"\n                checked={this.isClassComponent()}\n                onChange={this.handleChangeComponent('class')}\n              />\n              {componentDescriptionMap.class}\n            </label>\n          </div>\n          <div className=\"radio\">\n            <label>\n              <input\n                type=\"radio\"\n                value=\"functional\"\n                checked={this.isFunctionalComponent()}\n                onChange={this.handleChangeComponent('functional')}\n              />\n              {componentDescriptionMap.functional}\n            </label>\n          </div>\n          <div className=\"radio\">\n            <label>\n              <input\n                type=\"radio\"\n                value=\"hooks\"\n                checked={this.isHooksComponent()}\n                onChange={this.handleChangeComponent('hooks')}\n              />\n              {componentDescriptionMap.hooks}\n            </label>\n          </div>\n          <label>\n            Use useMemo:\n            <input\n              name=\"withMemo\"\n              type=\"checkbox\"\n              checked={withMemo}\n              onChange={this.handleChangeWithMemo}\n              disabled={!this.isHooksComponent()}\n            />\n          </label>\n          <button onClick={this.handleClickRunBenchmark} disabled={!component}>\n            Go!\n          </button>\n        </form>\n        {runBenchmark && (\n          <Benchmark\n            component={componentMap[component]}\n            n={n}\n            totalRenders={totalRenders}\n            withMemo={withMemo}\n            stopBenchmark={this.stopBenchmark}\n          />\n        )}\n        {!runBenchmark && Boolean(startTime) && Boolean(stopTime) && (\n          <p>\n            Displaying the {n}th Fibonacci number {totalRenders} many times took\n            the {componentDescription}{' '}\n            {stopTime.getTime() - startTime.getTime()} milliseconds.\n          </p>\n        )}\n        {Boolean(component) && (\n          <>\n            <xmp>{componentCodeMap[component]}</xmp>\n            <xmp>{propsString}</xmp>\n          </>\n        )}\n      </>\n    );\n  }\n}\n\nexport default App;\n","export const fibClassCode = `\nclass FibClass extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { result: nthFib(props.n) };\n  }\n\n  render() {\n    return (\n      <>\n        <h2>Class Component</h2>\n        <table>\n          <tbody>\n            <tr>\n              <td>Result</td>\n              <td>{this.state.result}</td>\n            </tr>\n            <tr>\n              <td>Render #</td>\n              <td>{this.props.renderNumber}</td>\n            </tr>\n          </tbody>\n        </table>\n      </>\n    );\n  }\n}\n`;\n\nexport const fibFunctionalCode = `\nfunction FibFunctional(props) {\n  const result = nthFib(props.n);\n\n  return (\n    <>\n      <h2>Functional component without Hooks</h2>\n      <table>\n        <tbody>\n          <tr>\n            <td>Result</td>\n            <td>{result}</td>\n          </tr>\n          <tr>\n            <td>Render #</td>\n            <td>{props.renderNumber}</td>\n          </tr>\n        </tbody>\n      </table>\n    </>\n  );\n}\n`;\n\nexport const fibHooksCode = `\nfunction FibHooks(props) {\n  const calculatedResult = props.withMemo\n    ? useMemo(() => nthFib(props.n), props.n)\n    : nthFib(props.n);\n  const [result] = useState(calculatedResult);\n\n  return (\n    <>\n      <h2>Functional component with Hooks</h2>\n      <table>\n        <tbody>\n          <tr>\n            <td>Result</td>\n            <td>{result}</td>\n          </tr>\n          <tr>\n            <td>Render #</td>\n            <td>{props.renderNumber}</td>\n          </tr>\n        </tbody>\n      </table>\n    </>\n  );\n}\n`;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}